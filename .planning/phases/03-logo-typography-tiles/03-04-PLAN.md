---
phase: 03-logo-typography-tiles
plan: 04
type: execute
wave: 3
depends_on: ["03-02", "03-03"]
files_modified:
  - src/components/tiles/PrimaryFontTile.tsx
  - src/components/tiles/SecondaryFontTile.tsx
  - src/components/tiles/index.ts
autonomous: true

must_haves:
  truths:
    - "Primary tile shows large Aa glyph, font name, weight, sample heading"
    - "Primary tile shows full character set"
    - "Secondary tile shows body-length sample text at smaller size"
    - "Both tiles display current font from state"
    - "Both tiles respond to font changes in real-time"
  artifacts:
    - path: "src/components/tiles/PrimaryFontTile.tsx"
      provides: "Primary typography specimen display"
      min_lines: 60
    - path: "src/components/tiles/SecondaryFontTile.tsx"
      provides: "Secondary typography body text display"
      min_lines: 40
  key_links:
    - from: "src/components/tiles/PrimaryFontTile.tsx"
      to: "src/state/canvasState.ts"
      via: "useCanvasStore for primaryFont"
      pattern: "useCanvasStore.*primaryFont"
    - from: "src/components/tiles/PrimaryFontTile.tsx"
      to: "src/hooks/useGoogleFonts.ts"
      via: "useGoogleFonts for font loading"
      pattern: "useGoogleFonts"
---

<objective>
Create the Primary and Secondary typography tiles that display font specimens and body text respectively.

Purpose: Typography tiles show the selected fonts in context - specimens for the heading font, body text for the secondary font.
Output: PrimaryFontTile and SecondaryFontTile components displaying current fonts from state.
</objective>

<execution_context>
@/Users/sannagranqvist/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sannagranqvist/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/03-logo-typography-tiles/03-RESEARCH.md

# Prior plans
@.planning/phases/03-logo-typography-tiles/03-01-PLAN.md
@.planning/phases/03-logo-typography-tiles/03-03-PLAN.md

@src/state/canvasState.ts
@src/hooks/useGoogleFonts.ts
@src/components/tiles/LogoTile.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PrimaryFontTile specimen display</name>
  <files>
    src/components/tiles/PrimaryFontTile.tsx
  </files>
  <action>
1. Create `src/components/tiles/PrimaryFontTile.tsx`:
   ```typescript
   import { useCanvasStore } from '@/state/canvasState';
   import { useGoogleFonts } from '@/hooks/useGoogleFonts';
   import { GOOGLE_FONTS } from '@/data/googleFontsMetadata';

   interface PrimaryFontTileProps {
     onClick?: () => void;
     isEditing?: boolean;
     previewFont?: string | null;  // For hover preview
   }

   // Character set to display
   const CHAR_SET_UPPER = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
   const CHAR_SET_LOWER = 'abcdefghijklmnopqrstuvwxyz';
   const CHAR_SET_NUMBERS = '0123456789';
   const CHAR_SET_SYMBOLS = '!@#$%&*(),.?';

   export function PrimaryFontTile({
     onClick,
     isEditing,
     previewFont
   }: PrimaryFontTileProps) {
     const primaryFont = useCanvasStore(state => state.assets.primaryFont);
     const { weight, sizeScale, lineHeight } = useCanvasStore(
       state => state.tileSettings.primaryFont
     );

     // Determine which font to display (preview or committed)
     const displayFont = previewFont || primaryFont;

     // Get font metadata
     const fontMeta = GOOGLE_FONTS.find(f => f.family === displayFont);
     const category = fontMeta?.category || 'sans-serif';

     // Load font
     const { fontFamily, loading, error } = useGoogleFonts(displayFont, category);

     // Format weight for display
     const displayWeight = weight === 'regular' ? '400' : weight;
     const numericWeight = parseInt(displayWeight) || 400;

     return (
       <div
         className={`tile tile-primary-font ${isEditing ? 'editing' : ''}`}
         onClick={onClick}
         role="button"
         tabIndex={0}
         aria-label="Primary typography tile - click to edit"
       >
         <div className="font-specimen">
           {/* Large Aa glyph */}
           <div
             className="specimen-glyph"
             style={{
               fontFamily,
               fontWeight: numericWeight,
               fontSize: `${4 * sizeScale}rem`,
               lineHeight: lineHeight,
             }}
           >
             Aa
           </div>

           {/* Font name and weight */}
           <div className="specimen-info">
             <h3
               className="specimen-name"
               style={{ fontFamily, fontWeight: numericWeight }}
             >
               {displayFont}
             </h3>
             <span className="specimen-weight">Weight: {displayWeight}</span>
             {loading && <span className="specimen-loading">Loading...</span>}
             {error && <span className="specimen-error">Fallback shown</span>}
           </div>

           {/* Sample heading */}
           <p
             className="specimen-heading"
             style={{
               fontFamily,
               fontWeight: numericWeight,
               fontSize: `${1.5 * sizeScale}rem`,
               lineHeight: lineHeight,
             }}
           >
             The quick brown fox jumps over the lazy dog
           </p>

           {/* Character set */}
           <div
             className="specimen-charset"
             style={{
               fontFamily,
               fontWeight: numericWeight,
               fontSize: `${0.75 * sizeScale}rem`,
               lineHeight: 1.6,
             }}
           >
             <div className="charset-row">{CHAR_SET_UPPER}</div>
             <div className="charset-row">{CHAR_SET_LOWER}</div>
             <div className="charset-row">{CHAR_SET_NUMBERS} {CHAR_SET_SYMBOLS}</div>
           </div>
         </div>
       </div>
     );
   }
   ```

2. Add CSS:
   ```css
   .tile-primary-font {
     padding: 20px;
     display: flex;
     flex-direction: column;
     overflow: hidden;
   }

   .font-specimen {
     display: flex;
     flex-direction: column;
     gap: 12px;
     height: 100%;
   }

   .specimen-glyph {
     color: #111;
     letter-spacing: -0.02em;
   }

   .specimen-info {
     display: flex;
     align-items: baseline;
     gap: 12px;
     flex-wrap: wrap;
   }

   .specimen-name {
     margin: 0;
     font-size: 16px;
     color: #111;
   }

   .specimen-weight {
     font-size: 12px;
     color: #888;
   }

   .specimen-loading,
   .specimen-error {
     font-size: 11px;
     padding: 2px 6px;
     border-radius: 4px;
   }

   .specimen-loading {
     background: #e8f4ff;
     color: #0066cc;
   }

   .specimen-error {
     background: #fff3cd;
     color: #856404;
   }

   .specimen-heading {
     margin: 0;
     color: #333;
   }

   .specimen-charset {
     color: #666;
     overflow-x: auto;
   }

   .charset-row {
     white-space: nowrap;
     letter-spacing: 0.1em;
   }
   ```
  </action>
  <verify>
    TypeScript compiles: `npx tsc --noEmit`
    Render PrimaryFontTile, verify large "Aa" displays
    Verify font name and weight shown
    Verify character set visible
    Verify font loads from Google Fonts
  </verify>
  <done>
    PrimaryFontTile displays large Aa glyph (TYPE-01), font name, weight, sample heading, and full character set
  </done>
</task>

<task type="auto">
  <name>Task 2: Create SecondaryFontTile body text display</name>
  <files>
    src/components/tiles/SecondaryFontTile.tsx
  </files>
  <action>
1. Create `src/components/tiles/SecondaryFontTile.tsx`:
   ```typescript
   import { useCanvasStore } from '@/state/canvasState';
   import { useGoogleFonts } from '@/hooks/useGoogleFonts';
   import { GOOGLE_FONTS } from '@/data/googleFontsMetadata';

   interface SecondaryFontTileProps {
     onClick?: () => void;
     isEditing?: boolean;
     previewFont?: string | null;  // For hover preview
   }

   // Body text samples
   const BODY_TEXT_SAMPLES = [
     "Typography is the art and technique of arranging type to make written language legible, readable, and appealing when displayed.",
     "Good typography establishes a visual hierarchy, provides graphic balance, and sets the product's overall tone.",
   ];

   export function SecondaryFontTile({
     onClick,
     isEditing,
     previewFont
   }: SecondaryFontTileProps) {
     const secondaryFont = useCanvasStore(state => state.assets.secondaryFont);
     const { weight, sizeScale, lineHeight } = useCanvasStore(
       state => state.tileSettings.secondaryFont
     );

     // Determine which font to display (preview or committed)
     const displayFont = previewFont || secondaryFont;

     // Get font metadata
     const fontMeta = GOOGLE_FONTS.find(f => f.family === displayFont);
     const category = fontMeta?.category || 'serif';

     // Load font
     const { fontFamily, loading, error } = useGoogleFonts(displayFont, category);

     // Format weight for display
     const displayWeight = weight === 'regular' ? '400' : weight;
     const numericWeight = parseInt(displayWeight) || 400;

     return (
       <div
         className={`tile tile-secondary-font ${isEditing ? 'editing' : ''}`}
         onClick={onClick}
         role="button"
         tabIndex={0}
         aria-label="Secondary typography tile - click to edit"
       >
         <div className="body-specimen">
           {/* Font info header */}
           <div className="body-header">
             <span
               className="body-font-name"
               style={{ fontFamily, fontWeight: numericWeight }}
             >
               {displayFont}
             </span>
             <span className="body-meta">
               {displayWeight} · Body text
               {loading && ' · Loading...'}
               {error && ' · Fallback'}
             </span>
           </div>

           {/* Body text samples */}
           <div className="body-content">
             {BODY_TEXT_SAMPLES.map((text, index) => (
               <p
                 key={index}
                 className="body-paragraph"
                 style={{
                   fontFamily,
                   fontWeight: numericWeight,
                   fontSize: `${0.9 * sizeScale}rem`,
                   lineHeight: lineHeight,
                 }}
               >
                 {text}
               </p>
             ))}
           </div>
         </div>
       </div>
     );
   }
   ```

2. Add CSS:
   ```css
   .tile-secondary-font {
     padding: 20px;
     display: flex;
     flex-direction: column;
     overflow: hidden;
   }

   .body-specimen {
     display: flex;
     flex-direction: column;
     gap: 12px;
     height: 100%;
   }

   .body-header {
     display: flex;
     justify-content: space-between;
     align-items: baseline;
     flex-wrap: wrap;
     gap: 8px;
   }

   .body-font-name {
     font-size: 14px;
     color: #111;
   }

   .body-meta {
     font-size: 11px;
     color: #888;
   }

   .body-content {
     flex: 1;
     display: flex;
     flex-direction: column;
     gap: 12px;
     overflow: hidden;
   }

   .body-paragraph {
     margin: 0;
     color: #444;
   }
   ```
  </action>
  <verify>
    TypeScript compiles: `npx tsc --noEmit`
    Render SecondaryFontTile, verify body text displays
    Verify font name shown at top
    Verify font loads from Google Fonts
    Verify text respects line height setting
  </verify>
  <done>
    SecondaryFontTile displays body-length sample text at smaller size (TYPE-02) with font name and weight info
  </done>
</task>

<task type="auto">
  <name>Task 3: Create tiles index and integration test</name>
  <files>
    src/components/tiles/index.ts
  </files>
  <action>
1. Create or update `src/components/tiles/index.ts`:
   ```typescript
   export { LogoTile } from './LogoTile';
   export { PrimaryFontTile } from './PrimaryFontTile';
   export { SecondaryFontTile } from './SecondaryFontTile';
   ```

2. Create a simple integration test in App.tsx to verify all tiles work:
   ```typescript
   // Temporary test code - add to App.tsx to verify tiles
   import { LogoTile, PrimaryFontTile, SecondaryFontTile } from '@/components/tiles';
   import { useCanvasStore } from '@/state/canvasState';

   function App() {
     const { primaryFont, secondaryFont } = useCanvasStore(state => state.assets);

     return (
       <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '16px', padding: '24px' }}>
         <div style={{ aspectRatio: '1', background: 'white', borderRadius: '12px', overflow: 'hidden' }}>
           <LogoTile />
         </div>
         <div style={{ aspectRatio: '1', background: 'white', borderRadius: '12px', overflow: 'hidden' }}>
           <PrimaryFontTile />
         </div>
         <div style={{ aspectRatio: '1', background: 'white', borderRadius: '12px', overflow: 'hidden' }}>
           <SecondaryFontTile />
         </div>
       </div>
     );
   }
   ```

3. Verify:
   - All three tiles render without errors
   - LogoTile shows logo or placeholder
   - PrimaryFontTile shows "Inter" (default) with Aa glyph
   - SecondaryFontTile shows "Lora" (default) with body text
   - Fonts load from Google Fonts (check Network tab)

4. Clean up test code after verification (or leave for Phase 2 canvas integration).
  </action>
  <verify>
    TypeScript compiles: `npx tsc --noEmit`
    App runs: `npm run dev`
    All three tiles visible and displaying content
    Fonts load correctly (Network tab shows Google Fonts requests)
  </verify>
  <done>
    All typography tiles exported from index.ts, integration verified with test render
  </done>
</task>

</tasks>

<verification>
1. TYPE-01: Primary tile shows large Aa glyph, font name, weight, sample heading, character set
2. TYPE-02: Secondary tile shows body-length sample text at smaller size
3. Both tiles use fonts from state (primaryFont, secondaryFont)
4. Both tiles support previewFont prop for hover preview (TYPE-08 ready)
5. Font loading indicator shown while loading
6. System fallback shown on load failure (TYPE-15)
</verification>

<success_criteria>
- PrimaryFontTile renders with Aa, font name, weight, heading, charset
- SecondaryFontTile renders with body paragraphs
- Both load fonts on-demand via useGoogleFonts
- Both accept previewFont prop for hover preview
- No TypeScript errors, app runs without crashes
</success_criteria>

<output>
After completion, create `.planning/phases/03-logo-typography-tiles/03-04-SUMMARY.md`
</output>
