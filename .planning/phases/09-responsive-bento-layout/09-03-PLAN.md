---
phase: 09-responsive-bento-layout
plan: 03
type: execute
wave: 3
depends_on: ["09-02"]
files_modified:
  - src/components/BentoTile.tsx
  - src/components/BentoCanvas.jsx
autonomous: true

must_haves:
  truths:
    - "Tiles use responsive spans based on current breakpoint"
    - "Tiles never overflow the grid or overlap"
    - "Tile layout is deterministic and stable across breakpoint changes"
  artifacts:
    - path: "src/components/BentoTile.tsx"
      provides: "Responsive tile wrapper component"
      exports: ["BentoTile"]
      min_lines: 40
  key_links:
    - from: "src/components/BentoTile.tsx"
      to: "src/config/layoutPresets.ts"
      via: "LAYOUT_PRESETS lookup"
      pattern: "LAYOUT_PRESETS"
    - from: "src/components/BentoTile.tsx"
      to: "src/store/useLayoutStore.ts"
      via: "useLayoutStore"
      pattern: "useLayoutStore"
---

<objective>
Create BentoTile wrapper that applies responsive spans based on tile type and breakpoint.

Purpose: Each tile type has predefined spans per breakpoint, ensuring deterministic layout.
Output: BentoTile component that wraps tile content with correct grid placement.
</objective>

<execution_context>
@/Users/sannagranqvist/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sannagranqvist/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/09-responsive-bento-layout/09-RESEARCH.md
@.planning/phases/09-responsive-bento-layout/09-01-SUMMARY.md
@src/components/BentoCanvas.jsx
@src/config/layoutPresets.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BentoTile wrapper component</name>
  <files>src/components/BentoTile.tsx</files>
  <action>
Create BentoTile component that applies responsive grid spans:

```typescript
import React, { ReactNode } from 'react';
import { useLayoutStore } from '../store/useLayoutStore';
import { LAYOUT_PRESETS } from '../config/layoutPresets';
import { cn } from '../utils/cn'; // or twMerge

interface BentoTileProps {
  tileType: string;
  children: ReactNode;
  className?: string;
  style?: React.CSSProperties;
  // Pass through props for existing tile behavior
  onClick?: (e: React.MouseEvent) => void;
  onKeyDown?: (e: React.KeyboardEvent) => void;
  tabIndex?: number;
  role?: string;
  'aria-pressed'?: boolean;
}

export const BentoTile = ({
  tileType,
  children,
  className,
  style,
  ...props
}: BentoTileProps) => {
  const breakpoint = useLayoutStore((s) => s.breakpoint);
  const preset = useLayoutStore((s) => s.preset);

  const config = LAYOUT_PRESETS[preset];
  const tileSpans = config.tileSpans[tileType];

  // Default span if tile type not found in preset
  const defaultSpan = { colSpan: 1, rowSpan: 1 };
  const span = tileSpans?.[breakpoint] || defaultSpan;

  return (
    <div
      className={cn(
        // Base tile styles
        'rounded-2xl overflow-hidden relative',
        // Prevent text overflow from expanding grid
        'min-w-0',
        // Focus styles
        'focus:outline-none focus:ring-2 focus:ring-black/5 dark:focus:ring-white/10',
        className
      )}
      style={{
        gridColumn: `span ${span.colSpan}`,
        gridRow: `span ${span.rowSpan}`,
        ...style,
      }}
      {...props}
    >
      {children}
    </div>
  );
};

export default BentoTile;
```

Key features:
1. Looks up tile type in current preset's tileSpans
2. Applies span based on current breakpoint
3. Uses min-w-0 to prevent text overflow issues
4. Passes through event handlers and accessibility props
5. Falls back to 1x1 if tile type not defined in preset
  </action>
  <verify>
TypeScript compiles: `npx tsc --noEmit src/components/BentoTile.tsx`
  </verify>
  <done>
BentoTile component created with responsive span lookup.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update BrandTile in BentoCanvas to use BentoTile</name>
  <files>src/components/BentoCanvas.jsx</files>
  <action>
Update the BrandTile component within BentoCanvas.jsx to use BentoTile wrapper:

1. Import BentoTile at top:
```javascript
import { BentoTile } from './BentoTile';
```

2. In the BrandTile component, replace the outer motion.div with BentoTile.

Current structure (simplified):
```jsx
<motion.div
  tabIndex={0}
  onKeyDown={handleKeyDown}
  role="button"
  aria-pressed={isFocused}
  onClick={(e) => { ... }}
  className={twMerge(
    "rounded-2xl overflow-hidden cursor-pointer relative group focus:outline-none focus:ring-2 focus:ring-black/5",
    tile.colSpan === 2 ? "col-span-2" : "col-span-1",
    tile.rowSpan === 2 ? "row-span-2" : "row-span-1",
  )}
  style={tileStyle}
  initial={{ opacity: 0, scale: 0.95 }}
  animate={{ opacity: 1, scale: 1 }}
  transition={{ ... }}
  whileHover={{ scale: 0.995 }}
  key={`${tile.id}-${tile.type}`}
>
  {renderContent()}
  {/* focus indicator */}
</motion.div>
```

Replace with:
```jsx
<BentoTile
  tileType={tile.type}
  tabIndex={0}
  onKeyDown={handleKeyDown}
  role="button"
  aria-pressed={isFocused}
  onClick={(e) => {
    e.stopPropagation();
    setFocusedTile(tile.id);
  }}
  className="cursor-pointer group"
  style={tileStyle}
>
  <motion.div
    initial={{ opacity: 0, scale: 0.95 }}
    animate={{ opacity: 1, scale: 1 }}
    transition={{
      duration: 0.3,
      delay: index * 0.05,
      ease: "easeOut",
    }}
    whileHover={{ scale: 0.995 }}
    className="h-full w-full"
  >
    {renderContent()}
    {/* Focus indicator */}
    {isFocused && (
      <motion.div
        initial={{ opacity: 0, y: -5 }}
        animate={{ opacity: 1, y: 0 }}
        className="absolute top-3 left-3 z-20 bg-white/95 px-3 py-1.5 rounded-lg text-[10px] font-semibold tracking-wider uppercase border border-[#E5E5E5] shadow-sm"
      >
        {tile.type} Focus
      </motion.div>
    )}
  </motion.div>
</BentoTile>
```

This moves grid span logic to BentoTile while preserving:
- Framer Motion animations (on inner div)
- Accessibility props
- Click/keyboard handlers
- Focus state styling

3. Remove the old colSpan/rowSpan conditional classes since BentoTile handles spans now.
  </action>
  <verify>
Run dev server:
1. Tiles render with correct spans based on type
2. Animations still work
3. Click/focus behavior preserved
`npm run dev` and test interactions
  </verify>
  <done>
BrandTile updated to use BentoTile wrapper with responsive spans.
  </done>
</task>

</tasks>

<verification>
1. BentoTile component applies correct spans per breakpoint
2. Tiles never overflow grid boundaries
3. Layout is stable when resizing browser
4. Existing tile interactions (click, hover, focus) still work
</verification>

<success_criteria>
- BentoTile.tsx exports BentoTile component
- BrandTile in BentoCanvas.jsx uses BentoTile wrapper
- Tile spans match preset configuration for current breakpoint
- No tile overflow or overlap occurs
</success_criteria>

<output>
After completion, create `.planning/phases/09-responsive-bento-layout/09-03-SUMMARY.md`
</output>
